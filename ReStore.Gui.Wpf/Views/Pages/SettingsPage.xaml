<Page x:Class="ReStore.Gui.Wpf.Views.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml" Background="{DynamicResource ApplicationBackgroundBrush}" TextOptions.TextFormattingMode="Display" TextOptions.TextRenderingMode="ClearType">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header Section -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Settings" FontSize="28" FontWeight="SemiBold" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
            <TextBlock Text="Configure your backup preferences and storage providers" FontSize="13" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Margin="0,4,0,0"/>
        </StackPanel>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical">
                <Border Padding="20" Background="{DynamicResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Effect="{StaticResource CardShadow}">
                    <StackPanel Orientation="Vertical">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <TextBlock FontFamily="{StaticResource IconFont}" Text="&#xE790;" FontSize="18" VerticalAlignment="Center" Foreground="{DynamicResource AccentFillColorDefaultBrush}" Margin="0,0,10,0"/>
                            <TextBlock Text="Appearance" FontSize="16" FontWeight="SemiBold" VerticalAlignment="Center" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                        </StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="140"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Theme" VerticalAlignment="Center" FontSize="14" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                            <ComboBox x:Name="ThemeSelector" Grid.Column="1" MinWidth="200" HorizontalAlignment="Left">
                                <ComboBoxItem Content="System"/>
                                <ComboBoxItem Content="Light"/>
                                <ComboBoxItem Content="Dark"/>
                            </ComboBox>
                        </Grid>
                    </StackPanel>
                </Border>

                <Border Padding="20" Background="{DynamicResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Margin="0,16,0,0" Effect="{StaticResource CardShadow}">
                    <StackPanel Orientation="Vertical">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <TextBlock FontFamily="{StaticResource IconFont}" Text="&#xE7C1;" FontSize="18" VerticalAlignment="Center" Foreground="{DynamicResource AccentFillColorDefaultBrush}" Margin="0,0,10,0"/>
                            <TextBlock Text="Application Behavior" FontSize="16" FontWeight="SemiBold" VerticalAlignment="Center" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                        </StackPanel>
                        <CheckBox x:Name="MinimizeToTrayCheckBox" Content="Minimize to system tray on close" Margin="0,0,0,8"/>
                        <TextBlock Text="When enabled, closing the window will minimize the app to the system tray instead of exiting. Double-click the tray icon to restore or right-click for options." Margin="0,4,0,0" TextWrapping="Wrap" Foreground="{DynamicResource TextFillColorSecondaryBrush}" FontSize="12" LineHeight="18"/>
                    </StackPanel>
                </Border>

                <Border Padding="20" Background="{DynamicResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Margin="0,16,0,0" Effect="{StaticResource CardShadow}">
                    <StackPanel Orientation="Vertical">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <TextBlock FontFamily="{StaticResource IconFont}" Text="&#xE8B7;" FontSize="18" VerticalAlignment="Center" Foreground="{DynamicResource AccentFillColorDefaultBrush}" Margin="0,0,10,0"/>
                            <TextBlock Text="Storage Providers" FontSize="16" FontWeight="SemiBold" VerticalAlignment="Center" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                        </StackPanel>
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="140"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Default storage" VerticalAlignment="Center" FontSize="14" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                            <ComboBox x:Name="StorageCombo" Grid.Column="1" MinWidth="300" HorizontalAlignment="Left">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}"/>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </Grid>

                        <CheckBox x:Name="ShowConfiguredOnly" Content="Show only configured providers" Margin="0,0,0,16"/>

                        <StackPanel Orientation="Horizontal">
                            <Button x:Name="OpenConfigBtn" Content="ðŸ“‚ Open Config Location" Cursor="Hand"/>
                            <Button x:Name="LoadExampleBtn" Content="ðŸ“„ Load Example Config" Margin="12,0,0,0" Cursor="Hand"/>
                        </StackPanel>

                        <Rectangle Height="1" Fill="{DynamicResource DividerStrokeColorDefaultBrush}" Opacity="0.3" Margin="0,20,0,16"/>

                        <!-- Providers -->
                        <TextBlock Text="Configure Providers" FontSize="14" FontWeight="Medium" Margin="0,0,0,12" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>

                        <Expander Header="Local Storage" Margin="0,0,0,12" IsExpanded="False">
                            <StackPanel Margin="12,12,12,8">
                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Path" VerticalAlignment="Center" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                                    <TextBox x:Name="LocalPathBox" Grid.Column="1"/>
                                </Grid>
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="SaveLocalBtn" Content="ðŸ’¾ Save" Cursor="Hand"/>
                                    <Button x:Name="TestLocalBtn" Content="ðŸ”„ Test Connection" Margin="8,0,0,0" Cursor="Hand"/>
                                </StackPanel>
                            </StackPanel>
                        </Expander>

                        <Expander Header="Amazon S3" Margin="0,0,0,12" IsExpanded="False">
                            <StackPanel Margin="12,12,12,8">
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="Access Key" Grid.Row="0" VerticalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBox x:Name="S3AccessKey" Grid.Row="0" Grid.Column="1" Margin="0,0,0,8"/>

                                    <TextBlock Text="Secret Key" Grid.Row="1" VerticalAlignment="Center" Margin="0,0,0,8"/>
                                    <PasswordBox x:Name="S3SecretKey" Grid.Row="1" Grid.Column="1" Margin="0,0,0,8"/>

                                    <TextBlock Text="Region" Grid.Row="2" VerticalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBox x:Name="S3Region" Grid.Row="2" Grid.Column="1" Margin="0,0,0,8"/>

                                    <TextBlock Text="Bucket" Grid.Row="3" VerticalAlignment="Center" Margin="0,0,0,12"/>
                                    <TextBox x:Name="S3Bucket" Grid.Row="3" Grid.Column="1" Margin="0,0,0,12"/>
                                </Grid>
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="SaveS3Btn" Content="ðŸ’¾ Save" Cursor="Hand"/>
                                    <Button x:Name="TestS3Btn" Content="ðŸ”„ Test Connection" Margin="8,0,0,0" Cursor="Hand"/>
                                </StackPanel>
                            </StackPanel>
                        </Expander>

                        <Expander Header="Google Drive" Margin="0,0,0,12" IsExpanded="False">
                            <StackPanel Margin="12,12,12,8">
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="Client ID" Grid.Row="0" VerticalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBox x:Name="GDClientId" Grid.Row="0" Grid.Column="1" Margin="0,0,0,8"/>

                                    <TextBlock Text="Client Secret" Grid.Row="1" VerticalAlignment="Center" Margin="0,0,0,8"/>
                                    <PasswordBox x:Name="GDClientSecret" Grid.Row="1" Grid.Column="1" Margin="0,0,0,8"/>

                                    <TextBlock Text="Token Folder" Grid.Row="2" VerticalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBox x:Name="GDTokenFolder" Grid.Row="2" Grid.Column="1" Margin="0,0,0,8"/>

                                    <TextBlock Text="Backup Folder" Grid.Row="3" VerticalAlignment="Center" Margin="0,0,0,12"/>
                                    <TextBox x:Name="GDBackupFolder" Grid.Row="3" Grid.Column="1" Margin="0,0,0,12"/>
                                </Grid>
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="SaveGDriveBtn" Content="ðŸ’¾ Save" Cursor="Hand"/>
                                    <Button x:Name="TestGDriveBtn" Content="ðŸ”„ Test Connection" Margin="8,0,0,0" Cursor="Hand"/>
                                </StackPanel>
                            </StackPanel>
                        </Expander>

                        <Expander Header="GitHub" Margin="0,0,0,12" IsExpanded="False">
                            <StackPanel Margin="12,12,12,8">
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="Token" Grid.Row="0" VerticalAlignment="Center" Margin="0,0,0,8"/>
                                    <PasswordBox x:Name="GhToken" Grid.Row="0" Grid.Column="1" Margin="0,0,0,8"/>

                                    <TextBlock Text="Owner" Grid.Row="1" VerticalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBox x:Name="GhOwner" Grid.Row="1" Grid.Column="1" Margin="0,0,0,8"/>

                                    <TextBlock Text="Repo" Grid.Row="2" VerticalAlignment="Center" Margin="0,0,0,12"/>
                                    <TextBox x:Name="GhRepo" Grid.Row="2" Grid.Column="1" Margin="0,0,0,12"/>
                                </Grid>
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="SaveGitHubBtn" Content="ðŸ’¾ Save" Cursor="Hand"/>
                                    <Button x:Name="TestGitHubBtn" Content="ðŸ”„ Test Connection" Margin="8,0,0,0" Cursor="Hand"/>
                                </StackPanel>
                            </StackPanel>
                        </Expander>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>